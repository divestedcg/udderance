				<div class="card fluid" id="install" data-pagefind-ignore="all">
					<h2 class="h2o">How to install</h2>
					<p>You can "install" this page as a PWA and it will display a simplified version:</p>
					<ul>
						<li>Firefox on Android: Menu button > Add app to Home screen > Add to home screen. May be cached.</li>
						<li>Chromium on Android: Menu button > Add to Home screen > Install > Install > Add to home screen. May be cached.</li>
						<li>Safari on iOS: Share button > Add to Home Screen > Add. Must be repeated each update.</li>
						<li>Special note for Safari: Lockdown must be disabled to allow WebSpeech API: Reader button > Page Menu > Lockdown Mode > Website settings for udderance.app > Disabled</li>
					</ul>
				</div>
				<div class="card fluid" id="aac" data-pagefind-ignore="all">
					<h2 class="h2o" id="aac_title">AAC</h2>
					<p id="errorField"></p>
					<noscript><p>WARNING: JavaScript is required!</p></noscript>
					<div class="section" id="freeform">
						<h3 class="h3o">Freeform Input</h3>
						<input type="text" id="textInputFreeform" style="width: 100%;" placeholder="Type something..." enterkeyhint="go"><br>
						<textarea id="textInputFreeformPrevious" aria-hidden="true" hidden></textarea><br>
						<div class="centero">
							<button onclick="speakFreeform()">Speak</button>
							<button onclick="speakFreeformPrevious()" class="inverse">Repeat Previous</button>
							<br>
							<label for="speakSpace">Speak on space instead of enter: </label>
							<input type="checkbox" name="speakSpace" id="speakSpace">
							<br>
							<p id="sherpaStatus" hidden></p>
						</div>
					</div>
					<div class="section" id="phrases">
						<h3 class="h3o">Phrases</h3>
						<div id="phrasesInner"></div>
					</div>
					<div class="section" id="log">
						<h3 class="h3o">Log</h3>
						<textarea id="textLog" rows="4" style="width: 100%;" placeholder="History will appear here..." disabled></textarea><br>
					</div>
					<div class="section" id="options">
						<h3 class="h3o">Options</h3>
						<label for="boardPreset">Board Preset: </label>
						<select name="boardPreset" id="boardPreset"></select>
						<br>
						<label for="boardAutoCollapse">Automatic board collapse: </label>
						<input type="checkbox" name="boardAutoCollapse" id="boardAutoCollapse" checked>
						<br>
						<label for="voice">Voice: </label>
						<select name="voice" id="voice"></select>
						<hr>
						<p>SherpaOnnx is available as an alternative to the system's native TTS backend. It requires a 100MB database download (which may not get cached) and WASM to be enabled. Longer prompts can be slow to generate. 904 voice variants are available.</p>
						<label for="useSherpa">Use Sherpa: </label>
						<input type="checkbox" name="useSherpa" id="useSherpa">
						<br>
						<label for="sherpaSpeakerID">Sherpa Speaker ID: </label>
						<input type="number" name="sherpaSpeakerID" id="sherpaSpeakerID" min="0" max="904" value="0">
						<br>
						<label for="sherpaSpeed">Sherpa Speed: </label>
						<input type="number" name="sherpaSpeed" id="sherpaSpeed" min="0.4" max="3.5" step="0.1" value="1.0">
					</div>
				</div>
<script>
	function adjustHeight(el){
		/* Credit (CC BY-SA 3.0): https://stackoverflow.com/a/17259991 */
		el.style.height = (el.scrollHeight > el.clientHeight) ? (el.scrollHeight)+"px" : "60px";
		if(el.scrollHeight > 400) {
			el.style.height = "400px";
		}
	}

	/* Credit (CC0): https://github.com/HadrienGardeur/web-speech-recommended-voices/tree/main/json/filters */
	const ignoreVoices = [
				"Albert", "Bad News", "Bahh", "Bells", "Boing", "Bubbles", "Cellos", "Good News", "Jester", "Organ", "Superstar", "Trinoids", "Whisper", "Wobble", "Zarvox",
				"Eddy", "Flo", "Grandma", "Grandpa", "Jacques", "Reed", "Rocko", "Sandy", "Shelley", "Fred", "Junior", "Kathy", "Ralph"];

	function loadVoices() {
		/* Credit: https://codepen.io/matt-west/pen/DpmMgE */
		removeChildren(document.getElementById('voice'), false);
		var option = document.createElement('option');
		option.value = "default";
		option.innerHTML = "Default";
		document.getElementById('voice').appendChild(option);
		var voices = speechSynthesis.getVoices();
		var numAdded = 0;
		voices.forEach(function(voice, i) {
			if (voice.lang === navigator.language) {
				if(ignoreVoices.includes(voice.name)) return;
				var option = document.createElement('option');
				option.value = voice.name;
				option.innerHTML = voice.name;
				document.getElementById('voice').appendChild(option);
				numAdded++;
			}
		});
		if (numAdded === 0) {
			voices.forEach(function(voice, i) {
				if (ignoreVoices.includes(voice.name)) return;
				if (voice.lang === navigator.language) {
					var option = document.createElement('option');
					option.value = voice.name;
					option.innerHTML = voice.name + "(" + voice.lang + ")";
					document.getElementById('voice').appendChild(option);
				}
			});
		}
	}

	function speakFreeform() {
		const text = document.getElementById('textInputFreeform').value.trim();
		if (text.length == 0) return;
		document.getElementById('textInputFreeformPrevious').value = text;
		document.getElementById('textInputFreeform').value = "";
		document.getElementById('textInputFreeform').focus();
		/* document.getElementById("textInputFreeform").scrollIntoView(); */
		speakText(text);
	}

	function speakFreeformPrevious() {
		speakText(document.getElementById('textInputFreeformPrevious').value);
	}

	function speakText(text) {
		text = text.trim();
		if (text.length == 0) return;
		const previousLog = document.getElementById('textLog').value;
		document.getElementById('textLog').value = new Date().toLocaleTimeString() + " - " + text + "\n" + previousLog;
		adjustHeight(document.getElementById('textLog'));
		speakTextReal(text);
	}

	function loadExternalJS(url, callAfterLoad, integrity) {
		var tmpJS = document.createElement('script');
		tmpJS.type = "text/javascript";
		tmpJS.src = url;
		if(integrity !== undefined) {
			tmpJS.integrity = integrity;
		}
		tmpJS.onload = callAfterLoad;
		document.body.appendChild(tmpJS);
	}

	let tts = null;
	let audioCtx = null;
	Module = {};
	let sherpaLoaded = false;
	const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent); /* Credit (CC BY-SA 4.0): https://stackoverflow.com/a/23522755 */
	const wasmSupported = (() => { /* Credit (CC BY-SA 3.0): https://stackoverflow.com/a/47880734 */
		try {
			if (typeof WebAssembly === "object" && typeof WebAssembly.instantiate === "function") {
				const module = new WebAssembly.Module(Uint8Array.of(0x0, 0x61, 0x73, 0x6d, 0x01, 0x00, 0x00, 0x00));
				if (module instanceof WebAssembly.Module)
					return new WebAssembly.Instance(module) instanceof WebAssembly.Instance;
			}
		} catch (e) {}
		return false;
	})();
	function initSherpa() {
		if (!sherpaLoaded && wasmSupported && !isSafari) {
			/* Credit (Apache-2.0): https://github.com/k2-fsa/sherpa-onnx/blob/master/wasm/tts/app-tts.js */
			document.getElementById('sherpaStatus').textContent = "Loading";

			loadExternalJS("/assets/sherpa-onnx/sherpa-onnx-tts.js", null, "sha384-olKOSYDQyGeqeF0Icur2481IST25MDaalHcguSZIYEn+2YszWgzTGl7jdEXU7f7O");
			loadExternalJS("/assets/sherpa-onnx/sherpa-onnx-wasm-main-tts.js", null, "sha384-eEpXm74uTowjM4I/C5wWNM/A85zJnJGYTIC6LPHOUjGS2aqEK4wvtHD0Cav8xaEt");

			Module.locateFile = function(path, scriptDirectory = '') {
				console.log(`path: ${path}, scriptDirectory: ${scriptDirectory}`);
				return scriptDirectory + path;
			};

			Module.setStatus = function(status) {
				console.log(`status ${status}`);
				document.getElementById('sherpaStatus').textContent = status;
			};

			Module.onRuntimeInitialized = function() {
				console.log('Initializing tts');
				document.getElementById('sherpaStatus').textContent = "Initializing";
				tts = createOfflineTts(Module)
			};

			sherpaLoaded = true;
		}
	}

	function speakTextReal(textReal) {
		if (document.getElementById('useSherpa').checked && sherpaLoaded) {
			/* Credit (Apache-2.0): https://github.com/k2-fsa/sherpa-onnx/blob/master/wasm/tts/app-tts.js */
			let speakerId = parseInt(document.getElementById('sherpaSpeakerID').value);
			let speedSet = parseInt(document.getElementById('sherpaSpeed').value);

			let audio = tts.generate({text : textReal, sid : speakerId, speed : speedSet});

			if (!audioCtx) {
				audioCtx = new AudioContext({sampleRate : tts.sampleRate});
			}

			const buffer = audioCtx.createBuffer(1, audio.samples.length, tts.sampleRate);

			const ptr = buffer.getChannelData(0);
			for (let i = 0; i < audio.samples.length; i++) {
				ptr[i] = audio.samples[i];
			}
			const source = audioCtx.createBufferSource();
			source.buffer = buffer;
			source.connect(audioCtx.destination);
			source.start();
		} else {
			const utterance = new SpeechSynthesisUtterance(textReal);
			if (document.getElementById('voice').value != "default") {
				utterance.voice = speechSynthesis.getVoices().filter(function(voice) { return voice.name == document.getElementById('voice').value; })[0];
			}
			window.speechSynthesis.speak(utterance);
		}
	}

	function removeChildren(element, andTop) {
		var children = element.childNodes;
		for(let i = 0; i < children.length; i++) {
			children[i].remove();
		}
		if (andTop) element.remove();
	}

	function loadPhrases(phrases) {
		document.getElementById("phrasesInner").remove();
		var phrasesInner = document.createElement('div');
		phrasesInner.id = "phrasesInner";

		for(let i = 1; i < phrases.length; i++) {
			var name = phrases[i][0];
			var category = name.toLowerCase();
			var collapseBlock = document.createElement('div');
			collapseBlock.className = "collapse";

			var collapseBlockInput = document.createElement('input');
			collapseBlockInput.type = "checkbox";
			collapseBlockInput.className = "phraseCollapse";
			collapseBlockInput.id = "collapse-phrases-" + category;
			collapseBlockInput.ariaHidden = true;
			collapseBlockInput.style = "max-width:10em;";
			if (category === "common") {
				collapseBlockInput.checked = true;
			}
			collapseBlock.appendChild(collapseBlockInput);

			var collapseBlockLabel = document.createElement('label');
			collapseBlockLabel.htmlFor = "collapse-phrases-" + category;
			collapseBlockLabel.ariaHidden = true;
			collapseBlockLabel.style = "max-width:10em;";
			collapseBlockLabel.innerText = name;
			collapseBlock.appendChild(collapseBlockLabel);

			var collapseBlockDiv = document.createElement('div');
			collapseBlockDiv.style = "max-height:100%;";
			collapseBlockDiv.id = "phraseButtons" + name;
			collapseBlockDiv.className = "centero";
			for (let x = 1; x < phrases[i].length; x++) {
				if (phrases[i][x].startsWith("CAT:")) {
					collapseBlockDiv.innerHTML += phrases[i][x].substring(4) + ": ";
				} else if (phrases[i][x] === "[SEP]") {
					collapseBlockDiv.innerHTML += "<br>";
				} else {
					collapseBlockDiv.innerHTML += "<button onclick=\"speakText(this.innerHTML)\" class=\"small\">" + phrases[i][x] + "</button>";
				}
			}
			collapseBlock.appendChild(collapseBlockDiv);

			phrasesInner.appendChild(collapseBlock);
		}
		document.getElementById("phrases").appendChild(phrasesInner);

		var phraseBlocks = document.getElementsByClassName('phraseCollapse');
		for(let i = 0; i < phraseBlocks.length; i++) {
			phraseBlocks[i].onclick =
				function() {
					if(document.getElementById('boardAutoCollapse').checked && (this.checked || this.id === "collapse-phrases-common")) {
						var clickedId = this.id;
						var phraseBlocksInner = document.getElementsByClassName('phraseCollapse');
						for(let i = 0; i < phraseBlocksInner.length; i++) {
							if (phraseBlocksInner[i].id !== clickedId && phraseBlocksInner[i].id !== "collapse-phrases-common") {
								phraseBlocksInner[i].checked = false;
							}
						}
					}
					this.scrollIntoView();
				}
		}
	}

	/* START OF BOARD PRESET: Default */
	const phrasesDefault = ["Default"];
	phrasesDefault.push(["Common", "yes", "no", "okay", "[SEP]",
				"I don't know", "I don't understand", "[SEP]",
				"what?", "why?", "how?", "[SEP]",
				"when?", "which?", "where?", "[SEP]",
				"good", "bad", "stop!", "[SEP]",
				"hello", "goodbye", "happy " + new Date().toLocaleString(document.language, {weekday:'long'}), "[SEP]",
				"please", "thank you", "[SEP]",
				"yesterday", "today", "tomorrow", "[SEP]",
				"day", "night", "morning", "afternoon", "[SEP]",
				"I am hungry", "I am thirsty", "I am tired", "I need the bathroom", "[SEP]"
				]);
	phrasesDefault.push(["Numbers", "0", "1", "2", "3", "4", "[SEP]", "5", "6", "7", "8", "9"]);
	phrasesDefault.push(["Foods", "I want", "I need", "[SEP]", "biscuits", "bread", "broccoli", "burger", "cereal", "chicken", "corn", "eggs", "french fries", "grilled cheese", "hash browns", "hot dogs", "mac and cheese", "pancakes", "pasta", "peanut butter and jelly", "pizza", "potatoes", "ramen", "rice", "sandwich", "sausage", "soup", "string beans", "toast", "waffles"]);
	phrasesDefault.push(["Snacks", "I want", "I need", "[SEP]", "brownies", "cake", "candy", "chips", "cookies", "crackers", "donuts", "ice cream", "muffins", "nuts", "pie", "pretzels"]);
	phrasesDefault.push(["Drinks", "I want", "I need", "[SEP]", "water", "juice", "coffee", "hot cocoa", "milk", "soda", "milkshake", "a straw"]);
	phrasesDefault.push(["Places", "outside", "inside", "home", "front yard", "back yard", "patio", "garage", "grocery store", "gas station", "hospital", "office", "school", "bank", "ATM", "gym"]);
	/* END OF BOARD PRESET: Default */

	/* START OF BOARD PRESET: Cboard Classic (2025-06-13) */
	const phrasesCboardClassic = ["Cboard Classic (GPL-3.0)"];
	phrasesCboardClassic.push(["Common", "yes", "no", "hello", "goodbye", "good", "bad", "I can't speak", "thank you", "please"]);
	phrasesCboardClassic.push(["Time", "time", "now", "yesterday", "today", "tomorrow", "morning", "afternoon", "night", "day", "this week", "weekend", "next week", "this month", "next month", "last month", "one hour", "minute", "second"]);
	phrasesCboardClassic.push(["Food", "I'm hungry", "I want", "and", "I dislike", "[SEP]", "soup", "vegetables", "fruit", "pizza", "bread", "boiled egg", "fried egg", "crossiant", "cereal", "porridge", "pancakes", "pasta", "poultry", "beef", "fish", "spaghetti bolognaise", "hamburger", "hot dog", "pie", "pepper mill", "salt", "tomato sauce", "vinegar", "sandwich", "bagel", "toast", "cheese", "noodles", "chips"]);
	phrasesCboardClassic.push(["Food: Soup", "soup", "carrot soup", "chicken soup", "mushroom soup", "onion soup", "pea soup", "tomato soup", "vegetable soup"]);
	phrasesCboardClassic.push(["Food: Vegetables", "vegetables", "salad", "potato", "mash potato", "sweet potato", "rice", "baked beans", "sweetcorn", "beetroot", "carrot", "tomato", "cucumber", "cabbage", "onion", "spring onions", "pepper", "chilli pepper", "lettuce", "asparagus", "radish", "aubergine", "broccoli", "peas", "avocado", "green beans", "spinach", "pumpkin", "brussel sprouts"]);
	phrasesCboardClassic.push(["Food: Fruit", "strawberry", "apple", "apricot", "peach", "magno", "pear", "orange", "melon", "banana", "kiwi", "pineapple", "watermelon", "cherry", "grapefruit", "grapes"]);
	phrasesCboardClassic.push(["Drinks", "I'm thirsty", "I want", "I dislike", "[SEP]", "drink", "water", "orange juice", "apple juice", "grape juice", "cranberry juice", "pineapple juice", "lemonade", "milk", "milkshake", "hot chocolate", "tea", "coffee", "wine", "beer", "straw"]);
	phrasesCboardClassic.push(["Snacks", "I want", "[SEP]", "ice cream", "chocolate", "crisps", "marshmallows", "biscuits", "jelly beans", "candy cane", "nuts", "cake clice", "chocolate chip biscuit", "yogurt", "ice lolly", "pretzel", "peanut"]);
	phrasesCboardClassic.push(["Activities", "I want", "[SEP]", "to cycle", "to play basketball", "to go bowling", "to play computer games", "to watch TV", "to solve jigsaw puzzle", "to play soccer", "to play bingo", "to bathe", "to work", "to cook", "to exercise", "to run", "to armwrestle", "to celebrate", "to swim", "to fish", "to play darts", "to play cards"]);
	phrasesCboardClassic.push(["Emotions", "I am", "You are", "Are you", "[SEP]", "happy", "sad", "angry", "afraid", "confused", "hot", "cold", "excited", "relaxed"]);
	phrasesCboardClassic.push(["Body", "I have pain in", "[SEP]", "itch", "head", "face", "neck", "shoulder", "arms", "right hand", "left hand", "elbow", "back", "stomach", "finger", "leg", "foot", "throat", "hip", "bottom", "thumb", "toe nail", "fingernail", "muscles", "skin", "bone", "knee"]);
	phrasesCboardClassic.push(["Body: Face", "face", "eyebrow", "eyes", "eye", "eyelash", "cheek", "ear", "lips", "teeth", "gum", "tongue", "chin"]);
	phrasesCboardClassic.push(["Body: Medical", "I am", "I have", "I need", "[SEP]", "back ache", "headache", "stomach ache", "toothache", "inhaler", "rash", "operation", "plaster", "medicine", "xray", "surgey health center", "syringe", "tablets", "blood pressure", "cut", "oxygen mask", "to vomit", "thermometer"]);
	phrasesCboardClassic.push(["Clothing", "shirt", "t-shirt", "trousers", "shorts", "jacket", "coat", "blouse", "dress", "jumper", "hoodie", "skirt", "vest", "pyjamas"]);
	phrasesCboardClassic.push(["Clothing: Accessories", "glasses", "sunglasses", "bobble hat", "cap", "bow tie", "tie", "socks", "gloves", "boots", "bra", "boxer shorts", "pants", "purse", "jewellery", "sandals", "trainers", "scarf", "umbrella", "watch"]);
	phrasesCboardClassic.push(["Colours", "black", "white", "mauve", "yellow", "pink", "blue", "green", "red"]);
	phrasesCboardClassic.push(["People", "dad", "mum", "teacher", "doctor", "nurse", "speech language therapist", "police", "delivery person", "post person", "dentist", "carpenter", "secretary", "taxi driver", "gardener", "IT assistant"]);
	phrasesCboardClassic.push(["People: Family", "my", "your", "[SEP]", "family", "grandfather", "grandmother", "mum", "dad", "sister", "brother", "daughter", "son", "baby"]);
	phrasesCboardClassic.push(["People: Characters", "fairy", "ghost", "elf", "witch", "moster"]);
	phrasesCboardClassic.push(["Describe", "I am", "It is", "You are", "no", "[SEP]", "ugly", "pretty", "large", "little", "same", "old", "fast", "dirty", "quiet", "loud", "fat", "thin", "tall", "short", "long", "empty", "full", "deep", "shallow", "open", "closed", "heavy", "light", "broken", "soft", "hard", "curly", "thick", "shiny", "fancy", "noisy", "dry", "wet", "sticky"]);
	phrasesCboardClassic.push(["Shapes", "circle", "oval", "triangle equilateral", "square", "rectangle", "pentagon", "hexagon", "octagon", "star", "diamon", "pyramid triangular base"]);
	phrasesCboardClassic.push(["Kitchen", "Where is", "I need", "my", "[SEP]", "fork", "knife", "spoon", "plate", "drinking glass", "mug", "straw", "serviette", "bowl", "place mat", "cooker", "fridge", "apron"]);
	phrasesCboardClassic.push(["School", "pen", "pencil", "pencil sharpener", "pencil case", "school bag", "notebook", "ring binder", "calculator", "scissors", "blackboard", "teacher", "tippex", "crayon", "glue", "stapler"]);
	phrasesCboardClassic.push(["School: Class Room", "algebra class", "art class", "drama class", "English class", "geography class", "history class", "maths class", "IT class", "music class", "science class", "no class"]);
	phrasesCboardClassic.push(["Animals", "I have", "I saw", "I want", "[SEP]", "dog", "cat", "hamster", "rabbit", "hedgehog", "horse", "donkey", "toad", "sheep", "dog kennel", "cage", "stable", "frog", "chick", "fish", "chicken live", "mouse", "rat", "parrot", "nest", "goose", "cow", "tortoise", "camel", "piglet"]);
	phrasesCboardClassic.push(["Animals: Wild", "tiger", "elephant", "giraffe", "gorilla", "snake", "rattle snake", "panda", "hippopotamus", "bear", "polar bear", "fox", "lion", "wolf", "chimpanzee", "deer", "zebra", "kangaroo", "bat", "koala", "rhinoceros", "dinosaur", "cheetah", "ant eater", "antelope", "chameleon"]);
	phrasesCboardClassic.push(["Animals: Marine", "seahorse", "penguin", "starfish", "dolphin", "seal", "killer whale", "crab", "goldfish", "oyster", "shrimp", "crocodile", "jellyfish", "walrus", "tropical fish", "fish koi carp", "fish"]);
	phrasesCboardClassic.push(["Animals: Birds", "owl", "vulture", "seagull", "dove", "parrot", "chick", "chicken live", "duck", "goose", "swan", "robin", "turkey", "ostrich", "bird", "penguin", "flamingo", "peacock", "cockerel", "cockatiel"]);
	phrasesCboardClassic.push(["Insects", "snail", "beetle", "honey bee", "ant", "cricket", "moth", "butterfly", "fly", "dragonfly", "earwig", "slug", "wasp", "beehive", "bees nest", "catepillar"]);
	phrasesCboardClassic.push(["Technology", "I need", "Where is", "my", "your", "[SEP]", "computer", "laptop", "electric charger", "battery", "camera", "headphones", "PlayStation", "USB stick", "printer", "computer mouse", "iPod", "iPhone", "stereo", "DVD player", "Wii", "remote control", "computer keyboard", "extension lead"]);
	phrasesCboardClassic.push(["Weather", "rain", "sun", "snow", "thunder storm", "cloudy", "autumn", "winter", "spring", "summer"]);
	phrasesCboardClassic.push(["Plants", "potted plant", "tree", "branch", "leaf", "tree trunk", "grass", "hedge", "bush", "flower", "daffodil", "daisy", "rose", "tulip", "petal", "seedling", "seeds", "stick", "roots", "vine", "holly", "weeds", "ivy", "palm tree", "dead plant", "acorn", "cactus", "pine cone"]);
	phrasesCboardClassic.push(["Sports", "judo", "tennis", "basketball", "cricket", "baseball bat", "badminton", "golf", "archery", "to ski", "to swim", "darts", "pool snooker", "to ride horse", "bowling", "boccia", "volleyball", "olympic rings", "para olympic games", "olympic torch", "golf", "race atheletics"]);
	phrasesCboardClassic.push(["Transport", "Let's go by", "I went by", "[SEP]", "car", "bicycle", "wheelchair", "motorcycle", "bus", "taxi", "aeroplane", "helicopter", "train", "mini bus", "ferry", "boat", "tractor", "skateboard", "army tank", "hot air baloon", "fire engine", "spaceship", "rocket", "Jeep", "ambulance", "police car", "van", "transport", "lorry", "refuse lorry"]);
	phrasesCboardClassic.push(["Places", "house", "shop", "bank", "office block", "outside", "beach", "gym", "church", "field", "back garden", "school", "surgery health center", "garage", "aquarium"]);
	/* TODO: countries */
	phrasesCboardClassic.push(["Position", "in", "out", "on", "under", "over", "behind", "in front", "through", "between", "up", "down", "left", "right", "around", "forwards", "backwards", "before", "after"]);
	phrasesCboardClassic.push(["Toys", "I want", "I love", "where", "your", "my", "[SEP]", "teddy bear", "doll", "shape puzzle", "toy car", "toy soldier", "toy telephone", "bricks", "ball", "bubbles", "kite", "playdough", "puppet", "beads", "Lego", "trampoline", "toys", "colouring book", "toy box", "stickers"]);
	phrasesCboardClassic.push(["Actions", "to get", "to give", "to put", "to hear", "to come", "to go", "to wait", "to take", "to watch", "to think", "to make", "to break", "to sleep", "to wake up", "to talk", "to shout", "to bring", "to move", "to fall over", "to stand", "to sit", "to share", "to carry", "to reach for", "to hold", "to keep", "to jump", "to chase", "to climb up", "to crawl", "to hop", "to enter door", "to exit door", "to rest", "to arrest", "to find", "to kick ball", "to study", "to change mind", "to pray", "to open"]);
	phrasesCboardClassic.push(["Questions", "what", "why", "how", "how many", "when", "which", "where"]);
	phrasesCboardClassic.push(["Furniture", "chair", "table", "high chair", "rocking chair", "coffee table", "rug", "corner cabinet", "dresser", "drawer", "door", "window", "book shelf", "bookcase", "stool", "beanbag", "dining table", "curtains", "single bed", "blanket", "lamp", "picture"]);
	phrasesCboardClassic.push(["Hygiene", "toothbrush", "toothpaste", "soap", "towel", "comb", "nail clippers", "paper towel", "sanitary towel", "tissues", "shampoo", "aftershave", "electric razor", "hair conditioner", "make up", "deodorant", "toilet roll", "hairdryer", "hair dye"]);
	phrasesCboardClassic.push(["Numbers", "0", "1", "2", "3", "4", "[SEP]", "5", "6", "7", "8", "9"]);
	/* END OF BOARD PRESET: Cboard Classic */

	const boardPresets = [phrasesDefault, phrasesCboardClassic];

	function loadBoardPresets() {
		removeChildren(document.getElementById('boardPreset'), false);

		for(let i = 0; i < boardPresets.length; i++) {
			var option = document.createElement('option');
			option.value = boardPresets[i][0].toLowerCase();
			option.innerHTML = boardPresets[i][0];
			option.onclick = function() {
				loadPhrases(boardPresets[i]);
				localStorage.setItem('boardPreset', boardPresets[i][0]);
			}
			document.getElementById('boardPreset').appendChild(option);
		}
	}

	function loadLastBoard() {
		var boardPreset = localStorage.getItem('boardPreset') || "Default";
		for(let i = 0; i < boardPresets.length; i++) {
			if (boardPresets[i][0] === boardPreset) {
				loadPhrases(boardPresets[i]);
				document.getElementById("boardPreset").selectedIndex = i;
			}
		}
	}

	document.addEventListener("DOMContentLoaded", function(event){
		document.getElementById('textInputFreeform').addEventListener("keypress", function (e) {
			/* Credit (CC BY-SA 4.0): https://stackoverflow.com/a/16011365 */
			if (e.code === "Enter" || (e.code === "Space" && document.getElementById('speakSpace').checked)) {
				speakFreeform();
				document.getElementById('textInputFreeform').value = "";
			}
		});

		document.getElementById('useSherpa').onclick = function() {
			initSherpa();
			if (document.getElementById('useSherpa').checked) {
				document.getElementById('sherpaStatus').hidden = false;
			} else {
				document.getElementById('sherpaStatus').hidden = true;
			}
		}

		if (window.matchMedia('(display-mode: standalone)').matches) {
			/* Credit (CC BY-SA 4.0): https://stackoverflow.com/a/41749865 */
			removeChildren(document.getElementById('real_header'), true);
			removeChildren(document.getElementById('real_footer'), true);
			document.getElementById('install').remove();
			document.getElementById('aac_title').remove();
		}

		if (window['speechSynthesis'] === undefined) {
			document.getElementById('errorField').innerText = "ERROR: TTS API unavailable!";
		}

		loadVoices();
		window.speechSynthesis.onvoiceschanged = function(e) {
			loadVoices();
		};

		loadBoardPresets();
		loadLastBoard();

		if (!wasmSupported || isSafari) {
			document.getElementById('useSherpa').disabled = true;
		}
	});
</script>
